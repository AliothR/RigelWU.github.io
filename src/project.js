require=function e(t,s,i){function o(h,c){if(!s[h]){if(!t[h]){var a="function"==typeof require&&require;if(!c&&a)return a(h,!0);if(n)return n(h,!0);var d=new Error("Cannot find module '"+h+"'");throw d.code="MODULE_NOT_FOUND",d}var r=s[h]={exports:{}};t[h][0].call(r.exports,function(e){var s=t[h][1][e];return o(s||e)},r,r.exports,e,t,s,i)}return s[h].exports}for(var n="function"==typeof require&&require,h=0;h<i.length;h++)o(i[h]);return o}({background:[function(e,t,s){"use strict";cc._RF.push(t,"52680n/rRlHNqMnURYxNSkK","background"),cc.Class({extends:cc.Component,properties:{speedY:0},onLoad:function(){this.resetY=this.node.parent.height,this.offsetY=0},update:function(e){this.node.y-=e*this.speedY,this.offsetY+=e*this.speedY,this.offsetY>=this.resetY&&(this.node.y+=this.offsetY,this.offsetY=0)}}),cc._RF.pop()},{}],boss:[function(e,t,s){"use strict";cc._RF.push(t,"93736Wir31PvL+d3y4HUwIN","boss"),cc.Class({extends:cc.Component,properties:{radius:300,bulletPrefab:{default:null,type:cc.Prefab},bulletInterval:.05},onLoad:function(){this.node.zIndex=9999,this.T=0,this.counter=0,this.newBullets=[]},update:function(e){this.T+=e,this.T>this.bulletInterval*this.counter&&(this.counter+=1,this.shootNewBullet(this.bulletInterval*this.counter,5,this.T%this.bulletInterval))},shootNewBullet:function(e,t,s){for(var i=0;i<t;++i){this.newBullets[i]=cc.instantiate(this.bulletPrefab);var o=e*e*Math.PI/8+2*Math.PI*i/t,n=250*s;this.newBullets[i].getComponent("bullet").speed=250,this.newBullets[i].getComponent("bullet").theta=o,this.newBullets[i].setPosition(cc.p(n*Math.cos(o),n*Math.sin(o))),this.node.parent.addChild(this.newBullets[i])}}}),cc._RF.pop()},{}],bullet:[function(e,t,s){"use strict";cc._RF.push(t,"abdbfBI/5xFD4OJBgKT+t0p","bullet"),cc.Class({extends:cc.Component,properties:{speed:0,theta:0,origin:1},onCollisionEnter:function(e,t){2!=t.tag&&(cc.log("Bullet hit"),this.node.destroy())},update:function(e){this.node.x+=this.speed*Math.cos(this.theta)*e,this.node.y+=this.speed*Math.sin(this.theta)*e,Math.abs(this.node.x)>this.node.parent.width/2&&(2==this.tag&&cc.log("Destroy. "),this.node.destroy()),Math.abs(this.node.y)>this.node.parent.height/2&&(2==this.tag&&cc.log("Destroy. "),this.node.destroy())}}),cc._RF.pop()},{}],enemy:[function(e,t,s){"use strict";cc._RF.push(t,"f1157SPiRhEhqPWTkUq6j9e","enemy"),cc.Class({extends:cc.Component,properties:{},init:function(e){this.game=e},onLoad:function(){this.hit=!1},onCollisionEnter:function(e,t){cc.log("Enemy is hit by bullet: "+(1==e.tag)),this.hit||(this.hit=!0,this.node.destroy(),this.game.spawnEnemy())}}),cc._RF.pop()},{}],game:[function(e,t,s){"use strict";cc._RF.push(t,"4f565FycQFGr6Li9YrLAlyE","game"),cc.Class({extends:cc.Component,properties:{enemyPrefab:{default:null,type:cc.Prefab}},spawnEnemy:function(){cc.log("spawn new Enemy");var e=cc.randomMinus1To1()*this.node.width/2,t=cc.randomMinus1To1()*this.node.height/2,s=cc.instantiate(this.enemyPrefab);this.node.addChild(s),s.setPosition(cc.p(e,t)),s.getComponent("enemy").init(this)},onLoad:function(){this.T=0,cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!1}}),cc._RF.pop()},{}],mouse:[function(e,t,s){"use strict";cc._RF.push(t,"15c2d2eOvlGGZD9D/TrH9e5","mouse"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.moseMoving=!1,this.mouseClickAction=!1,this.mouseClickStatus=!1,this.mouseReleaseAction=!1,this.mouseReleaseStatus=!1},update:function(e){}}),cc._RF.pop()},{}],player:[function(e,t,s){"use strict";cc._RF.push(t,"d8caed+5dRHfJ+m/6Vs/5Ak","player"),cc.Class({extends:cc.Component,properties:{spaceMoving:!1,Damping:.01,accel:0,maxMoveSpeed:0,playerBulletPrefab:{default:null,type:cc.Prefab},bulletInterval:.1},setInputControl:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,s){switch(t){case cc.KEY.a:case cc.KEY.left:e.accLeft=!0,e.accRight=!1,e.moveLeft=!0,e.moveRight=!1;break;case cc.KEY.d:case cc.KEY.right:e.accLeft=!1,e.accRight=!0,e.moveLeft=!1,e.moveRight=!0;break;case cc.KEY.w:case cc.KEY.up:e.accUp=!0,e.accDown=!1,e.moveUp=!0,e.moveDown=!1;break;case cc.KEY.s:case cc.KEY.down:e.accUp=!1,e.accDown=!0,e.moveUp=!1,e.moveDown=!0;break;case cc.KEY.shift:e.slowMode=!0;break;case cc.KEY.z:e.shooting=!0}},onKeyReleased:function(t,s){switch(t){case cc.KEY.a:case cc.KEY.left:e.accLeft=!1,e.moveLeft=!1;break;case cc.KEY.d:case cc.KEY.right:e.accRight=!1,e.moveRight=!1;break;case cc.KEY.w:case cc.KEY.up:e.accUp=!1,e.moveUp=!1;break;case cc.KEY.s:case cc.KEY.down:e.accDown=!1,e.moveDown=!1;break;case cc.KEY.shift:e.slowMode=!1;break;case cc.KEY.z:e.shooting=!1}}},e.node)},setMouseControl:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseDown:function(t){e.mousePressed=!0,e.mousePosX=t.getLocationX(),e.mousePosY=t.getLocationY()},onMouseMove:function(t){e.mousePosX=t.getLocationX(),e.mousePosY=t.getLocationY()},onMouseUp:function(t){e.mousePressed=!1}},e.node)},onLoad:function(){this.accLeft=!1,this.accRight=!1,this.accUp=!1,this.accDown=!1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.slowMode=!1,this.xSpeed=0,this.ySpeed=0,this.mousePosX=0,this.mousePosY=0,this.mousePressed=!1,this.setInputControl(),this.setMouseControl(),this.playerNewBullets=[],this.T=0,this.counter=0},onCollisionEnter:function(e,t){cc.log("Player is hit by bullet: "+(1==e.tag)),2!=e.tag&&(this.node.setPositionX(0),this.node.setPositionY(-210))},update:function(e){if(this.slowMode?this.node.getComponentInChildren(cc.Sprite).enabled=!0:this.node.getComponentInChildren(cc.Sprite).enabled=!1,this.spaceMoving)this.spaceMoving&&(this.accLeft?this.xSpeed-=this.accel*e:this.accRight&&(this.xSpeed+=this.accel*e),this.accUp?this.ySpeed+=this.accel*e:this.accDown&&(this.ySpeed-=this.accel*e),this.xSpeed*=1-this.Damping,this.ySpeed*=1-this.Damping);else{var t=this.slowMode?.4:1;this.moveLeft?this.xSpeed=-1*t*this.maxMoveSpeed:this.moveRight?this.xSpeed=t*this.maxMoveSpeed:this.xSpeed=0,this.moveUp?this.ySpeed=t*this.maxMoveSpeed:this.moveDown?this.ySpeed=-1*t*this.maxMoveSpeed:this.ySpeed=0,0!=this.xSpeed&&0!=this.ySpeed&&(this.xSpeed=Math.sqrt(2)*this.xSpeed,this.ySpeed=Math.sqrt(2)*this.ySpeed)}if(Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),Math.abs(this.ySpeed)>this.maxMoveSpeed&&(this.ySpeed=this.maxMoveSpeed*this.ySpeed/Math.abs(this.ySpeed)),this.node.x+=this.xSpeed*e,this.node.y+=this.ySpeed*e,this.spaceMoving?this.spaceMoving&&(this.node.x>this.node.parent.width/2-this.node.width/2?(this.node.x=this.node.parent.width/2-this.node.width/2,this.xSpeed*=-1):this.node.x<-this.node.parent.width/2+this.node.width/2&&(this.node.x=-this.node.parent.width/2+this.node.width/2,this.xSpeed*=-1),this.node.y>this.node.parent.height/2-this.node.height/2?(this.node.y=this.node.parent.height/2-this.node.height/2,this.ySpeed*=-1):this.node.y<-this.node.parent.height/2+this.node.height/2&&(this.node.y=-this.node.parent.height/2+this.node.height/2,this.ySpeed*=-1)):(this.node.x>this.node.parent.width/2-this.node.width/2?(this.node.x=this.node.parent.width/2-this.node.width/2,this.xSpeed=0):this.node.x<-this.node.parent.width/2+this.node.width/2&&(this.node.x=-this.node.parent.width/2+this.node.width/2,this.xSpeed=0),this.node.y>this.node.parent.height/2-this.node.height/2?(this.node.y=this.node.parent.height/2-this.node.height/2,this.ySpeed=0):this.node.y<-this.node.parent.height/2+this.node.height/2&&(this.node.y=-this.node.parent.height/2+this.node.height/2,this.ySpeed=0)),(this.mousePressed||this.shooting)&&(this.T+=e,this.T>this.bulletInterval*this.counter)){this.counter+=1,this.playerNewBullets[i]=cc.instantiate(this.playerBulletPrefab);var s=this.node.x+this.node.parent.width/2,o=this.node.y+this.node.parent.height/2;if(this.shooting)n=Math.PI/2;else{var n=Math.asin((this.mousePosY-o)/Math.sqrt((o-this.mousePosY)*(o-this.mousePosY)+(s-this.mousePosX)*(s-this.mousePosX)));this.mousePosX-s<0&&(n=Math.PI-n)}this.playerNewBullets[i].getComponent("bullet").speed=500,this.playerNewBullets[i].getComponent("bullet").theta=n,this.playerNewBullets[i].getComponent(cc.CircleCollider).tag=2,this.playerNewBullets[i].setPosition(this.node.x,this.node.y),this.node.parent.addChild(this.playerNewBullets[i])}}}),cc._RF.pop()},{}]},{},["background","boss","bullet","enemy","game","mouse","player"]);