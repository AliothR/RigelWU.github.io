require=function e(t,i,s){function o(h,a){if(!i[h]){if(!t[h]){var c="function"==typeof require&&require;if(!a&&c)return c(h,!0);if(n)return n(h,!0);var p=new Error("Cannot find module '"+h+"'");throw p.code="MODULE_NOT_FOUND",p}var l=i[h]={exports:{}};t[h][0].call(l.exports,function(e){var i=t[h][1][e];return o(i||e)},l,l.exports,e,t,i,s)}return i[h].exports}for(var n="function"==typeof require&&require,h=0;h<s.length;h++)o(s[h]);return o}({ai1:[function(e,t,s){"use strict";cc._RF.push(t,"cdd41d7zuJCAbkswf2P+ERg","ai1"),cc.Class({extends:e("creature"),properties:{spaceMoving:!1,Damping:.01,accel:0,maxMoveSpeed:0,playerBulletPrefab:{default:null,type:cc.Prefab},bulletInterval:.3,bulletTag:1101},onLoad:function(){this.accLeft=!1,this.accRight=!1,this.accUp=!1,this.accDown=!1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.slowMode=!1,this.xSpeed=0,this.ySpeed=0,this.mousePosX=0,this.mousePosY=0,this.mousePressed=!0,this.playerNewBullets=[],this.T=0,this.counter=0,cc.log(this.bulletTag)},onCollisionEnter:function(e,t){e.tag!=this.bulletTag&&(this.node.setPositionX(0),this.node.setPositionY(210),1001==e.tag&&(this.node.parent.getComponent("game").playerScore+=1))},update:function(e){this.ifAi1Move(e),this.keepInsideBoundary(),this.ifAi1Shoot(e)},ifAi1Move:function(e){if(this.spaceMoving)this.spaceMoving&&(this.accLeft?this.xSpeed-=this.accel*e:this.accRight&&(this.xSpeed+=this.accel*e),this.accUp?this.ySpeed+=this.accel*e:this.accDown&&(this.ySpeed-=this.accel*e),this.xSpeed*=1-this.Damping,this.ySpeed*=1-this.Damping);else{var t=this.slowMode?.4:1;this.moveLeft?this.xSpeed=-1*t*this.maxMoveSpeed:this.moveRight?this.xSpeed=t*this.maxMoveSpeed:this.xSpeed=0,this.moveUp?this.ySpeed=t*this.maxMoveSpeed:this.moveDown?this.ySpeed=-1*t*this.maxMoveSpeed:this.ySpeed=0,0!=this.xSpeed&&0!=this.ySpeed&&(this.xSpeed=Math.sqrt(2)*this.xSpeed,this.ySpeed=Math.sqrt(2)*this.ySpeed)}Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),Math.abs(this.ySpeed)>this.maxMoveSpeed&&(this.ySpeed=this.maxMoveSpeed*this.ySpeed/Math.abs(this.ySpeed)),this.node.x+=this.xSpeed*e,this.node.y+=this.ySpeed*e},ifAi1Shoot:function(e){if((this.mousePressed||this.shooting)&&(this.T+=e,this.T>this.bulletInterval*this.counter)){this.counter+=1,this.playerNewBullets[i]=cc.instantiate(this.playerBulletPrefab);var t=this.node.x+this.node.parent.width/2,s=this.node.y+this.node.parent.height/2;if(this.shooting)o=Math.PI/2;else{var o=Math.asin((this.mousePosY-s)/Math.sqrt((s-this.mousePosY)*(s-this.mousePosY)+(t-this.mousePosX)*(t-this.mousePosX)));this.mousePosX-t<0&&(o=Math.PI-o)}this.playerNewBullets[i].addComponent("specialBullet");var n=this.playerNewBullets[i].getComponent("specialBullet");n.speed=500,n.theta=o,this.playerNewBullets[i].getComponent(cc.CircleCollider).tag=this.bulletTag,this.playerNewBullets[i].setPosition(this.node.x,this.node.y),this.node.parent.addChild(this.playerNewBullets[i])}}}),cc._RF.pop()},{creature:"creature"}],background:[function(e,t,i){"use strict";cc._RF.push(t,"52680n/rRlHNqMnURYxNSkK","background"),cc.Class({extends:cc.Component,properties:{speedY:0},onLoad:function(){this.resetY=this.node.parent.height,this.offsetY=0},update:function(e){this.node.y-=e*this.speedY,this.offsetY+=e*this.speedY,this.offsetY>=this.resetY&&(this.node.y+=this.offsetY,this.offsetY=0)}}),cc._RF.pop()},{}],boss:[function(e,t,i){"use strict";cc._RF.push(t,"93736Wir31PvL+d3y4HUwIN","boss"),cc.Class({extends:e("creature"),properties:{radius:300,bulletPrefab:{default:null,type:cc.Prefab},bulletInterval:.05,bulletTag:9001,HP:3e4},onLoad:function(){this.node.zIndex=9999,this.T=0,this.counter=0,this.newBullets=[]},onCollisionEnter:function(e,t){e.tag!=this.bulletTag&&(this.HP-=100,cc.log(this.HP))},update:function(e){this.HP<=0&&(this.node.parent.getComponent("game").bossExist=!1,this.node.destroy()),this.T+=e,this.T>this.bulletInterval*this.counter&&(this.counter+=1,this.shootNewBullet(this.bulletInterval*this.counter,5,this.T%this.bulletInterval))},shootNewBullet:function(e,t,i){for(var s=0;s<t;++s){this.newBullets[s]=cc.instantiate(this.bulletPrefab);var o=e*e*Math.PI/8+2*Math.PI*s/t,n=250*i;this.newBullets[s].addComponent("bullet");var h=this.newBullets[s].getComponent("bullet");h.speed=250,h.theta=o,this.newBullets[s].setPosition(cc.p(n*Math.cos(o),n*Math.sin(o))),this.newBullets[s].getComponent(cc.CircleCollider).tag=this.bulletTag,this.node.parent.addChild(this.newBullets[s])}}}),cc._RF.pop()},{creature:"creature"}],bullet:[function(e,t,i){"use strict";cc._RF.push(t,"abdbfBI/5xFD4OJBgKT+t0p","bullet"),cc.Class({extends:cc.Component,properties:{speed:0,theta:0,origin:1},onCollisionEnter:function(e,t){t.tag-e.tag>0&&t.tag-e.tag<100||(cc.log("Bullet hit"),this.node.destroy())},update:function(e){this.bulletPositionUpdate(e),this.bulletDestroyIfOut()},bulletPositionUpdate:function(e){this.node.x+=this.speed*Math.cos(this.theta)*e,this.node.y+=this.speed*Math.sin(this.theta)*e},bulletDestroyIfOut:function(){Math.abs(this.node.x)>this.node.parent.width/2&&this.node.destroy(),Math.abs(this.node.y)>this.node.parent.height/2&&this.node.destroy()}}),cc._RF.pop()},{}],creature:[function(e,t,i){"use strict";cc._RF.push(t,"b370dmQgEZB6Lzf/QWBxwST","creature"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.id=0,this.blood=2e3,this.bulletsType=[],this.bulletInterval=.05,this.speed=50,this.shield=0,this.bomb=0},onLoad:function(){},keepInsideBoundary:function(e){this.spaceMoving?this.spaceMoving&&(this.node.x>this.node.parent.width/2-this.node.width/2?(this.node.x=this.node.parent.width/2-this.node.width/2,this.xSpeed*=-1):this.node.x<-this.node.parent.width/2+this.node.width/2&&(this.node.x=-this.node.parent.width/2+this.node.width/2,this.xSpeed*=-1),this.node.y>this.node.parent.height/2-this.node.height/2?(this.node.y=this.node.parent.height/2-this.node.height/2,this.ySpeed*=-1):this.node.y<-this.node.parent.height/2+this.node.height/2&&(this.node.y=-this.node.parent.height/2+this.node.height/2,this.ySpeed*=-1)):(this.node.x>this.node.parent.width/2-this.node.width/2?(this.node.x=this.node.parent.width/2-this.node.width/2,this.xSpeed=0):this.node.x<-this.node.parent.width/2+this.node.width/2&&(this.node.x=-this.node.parent.width/2+this.node.width/2,this.xSpeed=0),this.node.y>this.node.parent.height/2-this.node.height/2?(this.node.y=this.node.parent.height/2-this.node.height/2,this.ySpeed=0):this.node.y<-this.node.parent.height/2+this.node.height/2&&(this.node.y=-this.node.parent.height/2+this.node.height/2,this.ySpeed=0))}}),cc._RF.pop()},{}],enemy:[function(e,t,i){"use strict";cc._RF.push(t,"f1157SPiRhEhqPWTkUq6j9e","enemy"),cc.Class({extends:e("creature"),properties:{},init:function(e){this.game=e},onLoad:function(){this.hit=!1},onCollisionEnter:function(e,t){cc.log("Enemy is hit by bullet: "+(1==e.tag)),this.hit||(this.hit=!0,this.node.destroy(),this.game.spawnEnemy())}}),cc._RF.pop()},{creature:"creature"}],game:[function(e,t,i){"use strict";cc._RF.push(t,"4f565FycQFGr6Li9YrLAlyE","game");var s=cc.Enum({STG:1,PUBG:2});cc.Class({extends:cc.Component,properties:{test:1,gameMode:{default:s.STG,type:s},enemyPrefab:{default:null,type:cc.Prefab},boss:{default:null,type:cc.Node},player:{default:null,type:cc.Node},ai1:{default:null,type:cc.Node},playerScorePanel:{default:null,type:cc.Label},ai1ScorePanel:{default:null,type:cc.Label},bossHPPanel:{default:null,type:cc.Label}},spawnEnemy:function(){cc.log("spawn new Enemy");var e=cc.randomMinus1To1()*this.node.width/2,t=cc.randomMinus1To1()*this.node.height/2,i=cc.instantiate(this.enemyPrefab);this.node.addChild(i),i.setPosition(cc.p(e,t)),i.getComponent("enemy").init(this)},onLoad:function(){this.T=0,this.ai1MovingT=0,this.playerScore=0,this.ai1Score=0,cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!1,this.setMouseInputControl(),this.setKeyboardInputControl(),1==this.gameMode?(cc.log("gamemode: STG"),this.bossExist=!0,this.player.getComponent("player").bulletInterval=.1,this.player.getComponent("player").spaceMoving=!1,this.ai1.destroy(),this.playerScorePanel.destroy(),this.ai1ScorePanel.destroy()):2==this.gameMode&&(cc.log("gamemode: PUBG"),this.boss.destroy(),this.player.getComponent("player").spaceMoving=!0,this.bossHPPanel.destroy())},update:function(e){1==this.gameMode?this.bossExist?this.bossHPPanel.string="Boss HP:"+this.boss.getComponent("boss").HP.toString():this.bossHPPanel.string="CONGRATULATIONS\n"+this.player.getComponent("player").deathCounter.toString()+" DEATH(s)":2==this.gameMode&&(this.playerScorePanel.string="Your Score:"+this.playerScore.toString(),this.ai1ScorePanel.string="Enemy Score:"+this.ai1Score.toString(),this.setAi1MouseInputControl(e),this.setAi1KeyboardInputControl(e))},setMouseInputControl:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.MOUSE,onMouseDown:function(t){e.player.getComponent("player").mousePressed=!0,e.player.getComponent("player").mousePosX=t.getLocationX(),e.player.getComponent("player").mousePosY=t.getLocationY()},onMouseMove:function(t){e.player.getComponent("player").mousePosX=t.getLocationX(),e.player.getComponent("player").mousePosY=t.getLocationY()},onMouseUp:function(t){e.player.getComponent("player").mousePressed=!1}},e.node)},setKeyboardInputControl:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,i){switch(t){case cc.KEY.a:case cc.KEY.left:e.player.getComponent("player").accLeft=!0,e.player.getComponent("player").accRight=!1,e.player.getComponent("player").moveLeft=!0,e.player.getComponent("player").moveRight=!1;break;case cc.KEY.d:case cc.KEY.right:e.player.getComponent("player").accLeft=!1,e.player.getComponent("player").accRight=!0,e.player.getComponent("player").moveLeft=!1,e.player.getComponent("player").moveRight=!0;break;case cc.KEY.w:case cc.KEY.up:e.player.getComponent("player").accUp=!0,e.player.getComponent("player").accDown=!1,e.player.getComponent("player").moveUp=!0,e.player.getComponent("player").moveDown=!1;break;case cc.KEY.s:case cc.KEY.down:e.player.getComponent("player").accUp=!1,e.player.getComponent("player").accDown=!0,e.player.getComponent("player").moveUp=!1,e.player.getComponent("player").moveDown=!0;break;case cc.KEY.shift:e.player.getComponent("player").slowMode=!0;break;case cc.KEY.z:e.player.getComponent("player").shooting=!0}},onKeyReleased:function(t,i){switch(t){case cc.KEY.a:case cc.KEY.left:e.player.getComponent("player").accLeft=!1,e.player.getComponent("player").moveLeft=!1;break;case cc.KEY.d:case cc.KEY.right:e.player.getComponent("player").accRight=!1,e.player.getComponent("player").moveRight=!1;break;case cc.KEY.w:case cc.KEY.up:e.player.getComponent("player").accUp=!1,e.player.getComponent("player").moveUp=!1;break;case cc.KEY.s:case cc.KEY.down:e.player.getComponent("player").accDown=!1,e.player.getComponent("player").moveDown=!1;break;case cc.KEY.shift:e.player.getComponent("player").slowMode=!1;break;case cc.KEY.z:e.player.getComponent("player").shooting=!1}}},e.node)},setAi1MouseInputControl:function(e){this.ai1.getComponent("ai1").mousePressed=!0,this.ai1.getComponent("ai1").mousePosX=this.player.x+this.node.width/2+80*cc.randomMinus1To1(),this.ai1.getComponent("ai1").mousePosY=this.player.y+this.node.height/2+80*cc.randomMinus1To1()},setAi1KeyboardInputControl:function(e){var t=.5+2*cc.random0To1();if(this.ai1MovingT+=e,this.ai1MovingT>t){this.ai1MovingT=0;var i=cc.random0To1(),s=cc.random0To1();i>.5?(this.ai1.getComponent("ai1").accLeft=!0,this.ai1.getComponent("ai1").accRight=!1,this.ai1.getComponent("ai1").moveLeft=!0,this.ai1.getComponent("ai1").moveRight=!1):(this.ai1.getComponent("ai1").accLeft=!1,this.ai1.getComponent("ai1").accRight=!0,this.ai1.getComponent("ai1").moveLeft=!1,this.ai1.getComponent("ai1").moveRight=!0),s>.5?(this.ai1.getComponent("ai1").accUp=!0,this.ai1.getComponent("ai1").accDown=!1,this.ai1.getComponent("ai1").moveUp=!0,this.ai1.getComponent("ai1").moveDown=!1):(this.ai1.getComponent("ai1").accUp=!1,this.ai1.getComponent("ai1").accDown=!0,this.ai1.getComponent("ai1").moveUp=!1,this.ai1.getComponent("ai1").moveDown=!0)}}}),cc._RF.pop()},{}],mouse:[function(e,t,i){"use strict";cc._RF.push(t,"15c2d2eOvlGGZD9D/TrH9e5","mouse"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.moseMoving=!1,this.mouseClickAction=!1,this.mouseClickStatus=!1,this.mouseReleaseAction=!1,this.mouseReleaseStatus=!1},update:function(e){}}),cc._RF.pop()},{}],player:[function(e,t,s){"use strict";cc._RF.push(t,"d8caed+5dRHfJ+m/6Vs/5Ak","player"),cc.Class({extends:e("creature"),properties:{spaceMoving:!1,Damping:.01,accel:0,maxMoveSpeed:0,playerBulletPrefab:{default:null,type:cc.Prefab},bulletInterval:.3,bulletTag:1001},onLoad:function(){this.accLeft=!1,this.accRight=!1,this.accUp=!1,this.accDown=!1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.slowMode=!1,this.xSpeed=0,this.ySpeed=0,this.mousePosX=0,this.mousePosY=0,this.mousePressed=!1,this.playerNewBullets=[],this.T=0,this.counter=0,this.deathCounter=0,this.node.getComponentInChildren(cc.Sprite).enabled=!1},onCollisionEnter:function(e,t){e.tag!=this.bulletTag&&(this.node.setPositionX(0),this.node.setPositionY(-210),this.deathCounter+=1,1101==e.tag&&(this.node.parent.getComponent("game").ai1Score+=1))},update:function(e){1==this.slowMode?this.node.getComponentInChildren(cc.Sprite).enabled=!0:this.node.getComponentInChildren(cc.Sprite).enabled=!1,this.ifPlayerMove(e),this.keepInsideBoundary(),this.ifPlayerShoot(e)},ifPlayerMove:function(e){if(this.spaceMoving)this.spaceMoving&&(this.accLeft?this.xSpeed-=this.accel*e:this.accRight&&(this.xSpeed+=this.accel*e),this.accUp?this.ySpeed+=this.accel*e:this.accDown&&(this.ySpeed-=this.accel*e),this.xSpeed*=1-this.Damping,this.ySpeed*=1-this.Damping);else{var t=this.slowMode?.4:1;this.moveLeft?this.xSpeed=-1*t*this.maxMoveSpeed:this.moveRight?this.xSpeed=t*this.maxMoveSpeed:this.xSpeed=0,this.moveUp?this.ySpeed=t*this.maxMoveSpeed:this.moveDown?this.ySpeed=-1*t*this.maxMoveSpeed:this.ySpeed=0,0!=this.xSpeed&&0!=this.ySpeed&&(this.xSpeed=Math.sqrt(2)*this.xSpeed,this.ySpeed=Math.sqrt(2)*this.ySpeed)}Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),Math.abs(this.ySpeed)>this.maxMoveSpeed&&(this.ySpeed=this.maxMoveSpeed*this.ySpeed/Math.abs(this.ySpeed)),this.node.x+=this.xSpeed*e,this.node.y+=this.ySpeed*e},ifPlayerShoot:function(e){if((this.mousePressed||this.shooting)&&(this.T+=e,this.T>this.bulletInterval*this.counter)){this.counter+=1,this.playerNewBullets[i]=cc.instantiate(this.playerBulletPrefab);var t=this.node.x+this.node.parent.width/2,s=this.node.y+this.node.parent.height/2;if(this.shooting)o=Math.PI/2;else{var o=Math.asin((this.mousePosY-s)/Math.sqrt((s-this.mousePosY)*(s-this.mousePosY)+(t-this.mousePosX)*(t-this.mousePosX)));this.mousePosX-t<0&&(o=Math.PI-o)}this.playerNewBullets[i].addComponent("specialBullet");var n=this.playerNewBullets[i].getComponent("specialBullet");n.speed=500,n.theta=o,this.playerNewBullets[i].getComponent(cc.CircleCollider).tag=this.bulletTag,this.playerNewBullets[i].setPosition(this.node.x,this.node.y),this.node.parent.addChild(this.playerNewBullets[i])}}}),cc._RF.pop()},{creature:"creature"}],specialBullet:[function(e,t,i){"use strict";cc._RF.push(t,"d7810625u5O5ZZGCgcoNdnG","specialBullet"),cc.Class({extends:e("bullet"),update:function(e){this.bulletPositionUpdate(e),this.bulletDestroyIfOut(),this.node.rotation+=720*e,this.node.width+=2,this.node.height+=2,this.getComponent(cc.CircleCollider).radius+=.8}}),cc._RF.pop()},{bullet:"bullet"}]},{},["background","bullet","specialBullet","ai1","boss","creature","enemy","player","game","mouse"]);