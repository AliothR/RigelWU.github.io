require=function e(t,i,s){function n(o,c){if(!i[o]){if(!t[o]){var d="function"==typeof require&&require;if(!c&&d)return d(o,!0);if(h)return h(o,!0);var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}var p=i[o]={exports:{}};t[o][0].call(p.exports,function(e){var i=t[o][1][e];return n(i||e)},p,p.exports,e,t,i,s)}return i[o].exports}for(var h="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({background:[function(e,t,i){"use strict";cc._RF.push(t,"52680n/rRlHNqMnURYxNSkK","background"),cc.Class({extends:cc.Component,properties:{speedY:0},onLoad:function(){this.resetY=this.node.parent.height,this.offsetY=0},update:function(e){this.node.y-=e*this.speedY,this.offsetY+=e*this.speedY,this.offsetY>=this.resetY&&(this.node.y+=this.offsetY,this.offsetY=0)}}),cc._RF.pop()},{}],boss:[function(e,t,i){"use strict";cc._RF.push(t,"93736Wir31PvL+d3y4HUwIN","boss"),cc.Class({extends:cc.Component,properties:{radius:300},onLoad:function(){this.node.zIndex=9999}}),cc._RF.pop()},{}],bullet:[function(e,t,i){"use strict";cc._RF.push(t,"abdbfBI/5xFD4OJBgKT+t0p","bullet");cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onCollisionEnter:function(e,t){cc.log("Bullet hit"),this.node.destroy()},update:function(e){this.node.x+=this.speed*Math.cos(this.theta)*e,this.node.y+=this.speed*Math.sin(this.theta)*e,Math.abs(this.node.x)>480&&this.node.destroy(),Math.abs(this.node.y)>320&&this.node.destroy()}});cc._RF.pop()},{}],enemy:[function(e,t,i){"use strict";cc._RF.push(t,"f1157SPiRhEhqPWTkUq6j9e","enemy"),cc.Class({extends:cc.Component,properties:{},init:function(e){this.game=e},onLoad:function(){this.hit=!1},onCollisionEnter:function(e,t){cc.log("Enemy is hit by bullet: "+(1==e.tag)),this.hit||(this.hit=!0,this.node.destroy(),this.game.spawnEnemy())}}),cc._RF.pop()},{}],game:[function(e,t,i){"use strict";cc._RF.push(t,"4f565FycQFGr6Li9YrLAlyE","game"),cc.Class({extends:cc.Component,properties:{bulletPrefab:{default:null,type:cc.Prefab},enemyPrefab:{default:null,type:cc.Prefab},bulletInterval:500,bulletSpeedCoefficient:500,bulletSpeedIntercept:100,w:.1},spawnEnemy:function(){cc.log("spawn new Enemy");var e=cc.randomMinus1To1()*this.node.width/2,t=cc.randomMinus1To1()*this.node.height/2,i=cc.instantiate(this.enemyPrefab);this.node.addChild(i),i.setPosition(cc.p(e,t)),i.getComponent("enemy").init(this)},test:function(){this.node.width=3},onLoad:function(){this.T=0,this.deltaT=0,this.i=-1,this.newBullets=[],this.spawnEnemy(),cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!0},update:function(e){this.deltaT+=e,this.T+=e,this.deltaT>this.bulletInterval&&(this.shootNewBullet(this.T-this.T%this.bulletInterval,5),this.deltaT-=this.bulletInterval)},shootNewBullet:function(e,t){for(var i=0;i<t;++i)this.newBullets[i]=cc.instantiate(this.bulletPrefab),this.newBullets[i].getComponent("bullet").speed=250,this.newBullets[i].getComponent("bullet").theta=this.T*this.T*Math.PI/8+2*Math.PI*i/t,this.newBullets[i].setPosition(cc.p(0,0)),this.node.addChild(this.newBullets[i])}}),cc._RF.pop()},{}],player:[function(e,t,i){"use strict";cc._RF.push(t,"d8caed+5dRHfJ+m/6Vs/5Ak","player"),cc.Class({extends:cc.Component,properties:{spaceMoving:!1,Damping:.01,accel:0,maxMoveSpeed:0},setInputControl:function(){var e=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t,i){switch(t){case cc.KEY.a:case cc.KEY.left:e.accLeft=!0,e.accRight=!1,e.moveLeft=!0,e.moveRight=!1;break;case cc.KEY.d:case cc.KEY.right:e.accLeft=!1,e.accRight=!0,e.moveLeft=!1,e.moveRight=!0;break;case cc.KEY.w:case cc.KEY.up:e.accUp=!0,e.accDown=!1,e.moveUp=!0,e.moveDown=!1;break;case cc.KEY.s:case cc.KEY.down:e.accUp=!1,e.accDown=!0,e.moveUp=!1,e.moveDown=!0;break;case cc.KEY.shift:e.slowMode=!0}},onKeyReleased:function(t,i){switch(t){case cc.KEY.a:case cc.KEY.left:e.accLeft=!1,e.moveLeft=!1;break;case cc.KEY.d:case cc.KEY.right:e.accRight=!1,e.moveRight=!1;break;case cc.KEY.w:case cc.KEY.up:e.accUp=!1,e.moveUp=!1;break;case cc.KEY.s:case cc.KEY.down:e.accDown=!1,e.moveDown=!1;break;case cc.KEY.shift:e.slowMode=!1}}},e.node)},onLoad:function(){this.accLeft=!1,this.accRight=!1,this.accUp=!1,this.accDown=!1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.slowMode=!1,this.xSpeed=0,this.ySpeed=0,this.setInputControl()},onCollisionEnter:function(e,t){cc.log("Player is hit by bullet: "+(1==e.tag)),this.node.setPositionX(0),this.node.setPositionY(-200)},update:function(e){if(this.spaceMoving)this.spaceMoving&&(this.accLeft?this.xSpeed-=this.accel*e:this.accRight&&(this.xSpeed+=this.accel*e),this.accUp?this.ySpeed+=this.accel*e:this.accDown&&(this.ySpeed-=this.accel*e),this.xSpeed*=1-this.Damping,this.ySpeed*=1-this.Damping);else{var t=this.slowMode?.25:1;this.moveLeft?this.xSpeed=-1*t*this.maxMoveSpeed:this.moveRight?this.xSpeed=t*this.maxMoveSpeed:this.xSpeed=0,this.moveUp?this.ySpeed=t*this.maxMoveSpeed:this.moveDown?this.ySpeed=-1*t*this.maxMoveSpeed:this.ySpeed=0}Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),Math.abs(this.ySpeed)>this.maxMoveSpeed&&(this.ySpeed=this.maxMoveSpeed*this.ySpeed/Math.abs(this.ySpeed)),this.node.x+=this.xSpeed*e,this.node.y+=this.ySpeed*e,this.spaceMoving?this.spaceMoving&&(this.node.x>this.node.parent.width/2-this.node.width/2?(this.node.x=this.node.parent.width/2-this.node.width/2,this.xSpeed*=-1):this.node.x<-this.node.parent.width/2+this.node.width/2&&(this.node.x=-this.node.parent.width/2+this.node.width/2,this.xSpeed*=-1),this.node.y>this.node.parent.height/2-this.node.height/2?(this.node.y=this.node.parent.height/2-this.node.height/2,this.ySpeed*=-1):this.node.y<-this.node.parent.height/2+this.node.height/2&&(this.node.y=-this.node.parent.height/2+this.node.height/2,this.ySpeed*=-1)):(this.node.x>this.node.parent.width/2-this.node.width/2?(this.node.x=this.node.parent.width/2-this.node.width/2,this.xSpeed=0):this.node.x<-this.node.parent.width/2+this.node.width/2&&(this.node.x=-this.node.parent.width/2+this.node.width/2,this.xSpeed=0),this.node.y>this.node.parent.height/2-this.node.height/2?(this.node.y=this.node.parent.height/2-this.node.height/2,this.ySpeed=0):this.node.y<-this.node.parent.height/2+this.node.height/2&&(this.node.y=-this.node.parent.height/2+this.node.height/2,this.ySpeed=0))}}),cc._RF.pop()},{}]},{},["background","boss","bullet","enemy","game","player"]);